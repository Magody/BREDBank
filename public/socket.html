<html>
    <head>
        <!--Ese archivo socket lo genera automÃ¡ticamente-->
        <script src="/socket.io/socket.io.js"></script>
    </head>
    <body>
        <h1>Mira la consola.</h1>

        <button id="boton">Boton</button>

        <script>


            document.getElementById("boton").innerHTML = "Cambio";
            document.getElementById("boton").click();

            var socket = io.connect('http://172.29.64.160:3000', {
                forceNew: true,  //que las conexiones siempre sean nuevas
            })
            //console.log(socket)

            socket.on("mensaje", function(data){
                console.log(data)
            }) 
            
            socket.on("alertaIntruso", function(data){
                alert("Alguien ha intentado acceder a su cuenta, por favor le solicitamos el cambio de credenciales")
            }) 
            
            
            // ahora escucha mensajes (WebSockets)

            /*window.addEventListener('beforeunload', function (e) { 
                e.preventDefault(); 
                e.returnValue = '';
                socket.disconnect()


            }); */
        </script>
    </body>
</html>